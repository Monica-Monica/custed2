webpackJsonp([9],{"B/IH":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("P9l9"),a={name:"post-news-management",data:function(){return{total:0,list:[],tableKey:0,listLoading:!1,deleteDialogVisible:!1,deleteTemp:{},isShow:{commentNum:!1,shareNum:!1,downNum:!1,status:!1,updateTime:!1,starNum:!1},listQuery:{page:1,limit:10,title:"",type:void 0,queryType:"",sort:"+id"}}},computed:{postQueryData:function(){return this.$store.getters.postNewsQuery}},methods:{handleSizeChange:function(e){this.listQuery.limit=e,this.getPostNewsList(this.postQueryData.newsId,this.listQuery.page,this.listQuery.limit)},handleCurrentChange:function(e){this.listQuery.page=e,this.getPostNewsList(this.postQueryData.newsId,this.listQuery.page,this.listQuery.limit)},handleComments:function(e){var t=this;this.$store.dispatch("SetCommentQuery",e).then(function(){t.$router.push({name:"Comments"})}).catch(function(){console.log(222)})},handleDelete:function(e){this.deleteTemp=e,this.deleteDialogVisible=!0},handleDeleteCommit:function(e){this.deletePostNewsRequest(e)},getPostNewsList:function(e,t,n){var a=this;console.log(this.postQueryData),e?Object(s.z)(e,t,n).then(function(e){console.log(e),0===e.data.code?(a.total=e.data.data.total,a.list=e.data.data.list,console.log("duixiang",a.list),a.$message({message:"跟帖获取成功",type:"success"})):a.$message.error(e.data.msg)}).catch(function(e){console.log(e.response)}):(this.$message.error("请重新选择一个资讯"),this.$router.push({name:"Important"}))},deletePostNewsRequest:function(e){var t=this;Object(s.q)(e).then(function(e){0===e.data.code?(t.getPostNewsList(t.postQueryData.newsId,t.listQuery.page,t.listQuery.limit),t.$message({message:"删除成功成功",type:"success"}),t.deleteDialogVisible=!1):(t.$message.error(e.data.msg),t.deleteDialogVisible=!1)}).catch(function(e){console.log(e.response),t.deleteDialogVisible=!1})}},created:function(){this.getPostNewsList(this.postQueryData.newsId,1,10)}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"post-news-management-container"},[n("div",{staticClass:"filter-container top-filter"},[n("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px"},on:{change:function(t){e.tableKey=e.tableKey+1}},model:{value:e.isShow.commentNum,callback:function(t){e.$set(e.isShow,"commentNum",t)},expression:"isShow.commentNum"}},[e._v("评论数")]),e._v(" "),n("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px"},on:{change:function(t){e.tableKey=e.tableKey+1}},model:{value:e.isShow.starNum,callback:function(t){e.$set(e.isShow,"starNum",t)},expression:"isShow.starNum"}},[e._v("点赞数")]),e._v(" "),n("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px"},on:{change:function(t){e.tableKey=e.tableKey+1}},model:{value:e.isShow.updateTime,callback:function(t){e.$set(e.isShow,"updateTime",t)},expression:"isShow.updateTime"}},[e._v("更新时间")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.tableKey,attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"跟帖人ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.userId)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"跟帖人"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.nickname))]),e._v(" "),n("img",{staticClass:"image",attrs:{src:t.row.avatar}})]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"内容",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.content)+"\n      ")]}}])}),e._v(" "),e.isShow.commentNum?n("el-table-column",{attrs:{align:"center",label:"评论数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.commentNum)+"\n      ")]}}])}):e._e(),e._v(" "),e.isShow.starNum?n("el-table-column",{attrs:{align:"center",label:"点赞数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.starNum)+"\n      ")]}}])}):e._e(),e._v(" "),e.isShow.status?n("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.status)+"\n      ")]}}])}):e._e(),e._v(" "),e.isShow.updateTime?n("el-table-column",{attrs:{align:"center",prop:"created_at",label:"更新时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),e._v(" "),n("span",[e._v(e._s(new Date(1e3*parseInt(t.row.updateTime)).toLocaleString()))])]}}])}):e._e(),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作","class-name":"small-padding fixed-width",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(n){e.handleDelete(t.row)}}},[e._v("删除")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"info",plain:""},on:{click:function(n){e.handleComments(t.row)}}},[e._v("评论管理")])]}}])})],1),e._v(" "),n("div",{staticClass:"pagination-container",staticStyle:{margin:"10px"}},[n("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),n("el-dialog",{attrs:{title:"提示",visible:e.deleteDialogVisible,width:"50%"},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[n("span",[e._v("确定删除: ")]),n("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(e.deleteTemp.nickname))]),n("span",[e._v(" 的跟帖?")]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleDeleteCommit(e.deleteTemp.postId)}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var l=n("/Xao")(a,i,!1,function(e){n("hYIc")},null,null);t.default=l.exports},Hrgd:function(e,t,n){(e.exports=n("BkJT")(!1)).push([e.i,"\n.post-news-management-container .top-filter {\n  margin: 10px;\n}\n.post-news-management-container .image {\n  width: 20px;\n  display: inline-block;\n  vertical-align: center;\n}\n",""])},hYIc:function(e,t,n){var s=n("Hrgd");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);n("8bSs")("52779dfe",s,!0)}});