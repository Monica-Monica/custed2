webpackJsonp([7],{"/Uoo":function(t,e,i){var a=i("eJ3e");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("8bSs")("1adb75cf",a,!0)},eJ3e:function(t,e,i){(t.exports=i("BkJT")(!1)).push([t.i,'\n.important-info-management-container .time {\n  font-size: 13px;\n  color: #999;\n}\n.important-info-management-container .bottom {\n  margin-top: 13px;\n  line-height: 12px;\n}\n.important-info-management-container .button {\n  padding: 0;\n  float: right;\n}\n.important-info-management-container .image {\n  width: 100%;\n  display: block;\n}\n.important-info-management-container .clearfix:before,\n.important-info-management-container .clearfix:after {\n  display: table;\n  content: "";\n}\n.important-info-management-container .clearfix:after {\n  clear: both;\n}\n',""])},fcbk:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("aA9S"),n=i.n(a),s=i("P9l9"),o={name:"bind-info-management",data:function(){return{importantNewsLists:[],newsType:1,total:0,tableKey:0,listLoading:!1,dialogType:"",detailDialogVisible:!1,updateDialogVisible:!1,deleteDialogVisible:!1,temp:{},updateForm:{},deleteTemp:{},isShow:{commentNum:!1,shareNum:!1,downNum:!1,status:!1,updateTime:!1,starNum:!1},listQuery:{page:1,limit:10,title:"",type:void 0,queryType:"",sort:"+id"}}},computed:{bindQuery:function(){return this.$store.getters.bindQuery}},methods:{handleSizeChange:function(t){this.listQuery.limit=t,this.getNewsList(this.listQuery.page,this.listQuery.limit,this.newsType,this.bindQuery.coinId)},handleCurrentChange:function(t){this.listQuery.page=t,this.getNewsList(this.listQuery.page,this.listQuery.limit,this.newsType,this.bindQuery.coinId)},showFlashDetail:function(t){this.dialogType="showDetail",this.getNewsDetail(t.newsId)},handleCreateNews:function(){var t=this;this.$store.dispatch("SetNewsData",{title:"",content:"",type:"1",bindId:"",abstract:"",editType:"create"}).then(function(){t.$router.push({name:"tinymce"})}).catch(function(){console.log(222)})},handleUpdateImportantNews:function(t){this.dialogType="showUpdate",this.getNewsDetail(t.newsId)},handleDelete:function(t){this.deleteTemp=t,this.deleteDialogVisible=!0},handleDeleteCommit:function(t){this.deleteNewsRequest(t)},handlePostNews:function(t){var e=this;this.$store.dispatch("SetPostNewsQuery",t).then(function(){e.$router.push({name:"PostNews"})}).catch(function(){console.log(222)})},getNewsList:function(t,e,i,a){var n=this;this.bindQuery.coinId?(this.listLoading=!0,Object(s.w)(t,e,i,a).then(function(t){console.log(t),0===t.data.code?(n.importantNewsLists=t.data.data.list,n.total=t.data.data.total):n.$message.error(t.data.msg),n.listLoading=!1}).catch(function(t){console.log(t.response),n.listLoading=!1})):(this.$message.error("请重新选择一个货币查看"),this.$router.push({name:"CurrencyManagement"}))},getNewsDetail:function(t){var e=this;Object(s.v)(t).then(function(t){console.log(t),0===t.data.code?"showDetail"===e.dialogType?(e.temp=t.data.data,e.detailDialogVisible=!0):"showUpdate"===e.dialogType&&(e.updateTemp=t.data.data,e.updateForm=n()({},e.updateTemp),e.$store.dispatch("SetNewsData",t.data.data).then(function(){console.log(e.$store.getters.newsData),e.$router.push({name:"tinymce"})}).catch(function(){console.log(222)}),e.updateDialogVisible=!0):e.$message.error(t.data.msg)}).catch(function(t){console.log(t.response)})},deleteNewsRequest:function(t){var e=this;Object(s.o)(t).then(function(t){console.log(t),0===t.data.code?(e.getNewsList(e.listQuery.page,e.listQuery.limit,e.newsType,e.bindQuery.coinId),e.$message({message:"删除成功",type:"success"})):e.$message.error(t.data.msg),e.deleteDialogVisible=!1}).catch(function(t){console.log(t.response),e.deleteDialogVisible=!1})}},created:function(){this.getNewsList(1,10,this.newsType,this.bindQuery.coinId)}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container important-info-management-container"},[i("div",{staticClass:"filter-container top-filter"},[i("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px","margin-bottom":"15px"},on:{change:function(e){t.tableKey=t.tableKey+1}},model:{value:t.isShow.commentNum,callback:function(e){t.$set(t.isShow,"commentNum",e)},expression:"isShow.commentNum"}},[t._v("评论数")]),t._v(" "),i("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px","margin-bottom":"15px"},on:{change:function(e){t.tableKey=t.tableKey+1}},model:{value:t.isShow.shareNum,callback:function(e){t.$set(t.isShow,"shareNum",e)},expression:"isShow.shareNum"}},[t._v("分享数")]),t._v(" "),i("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px","margin-bottom":"15px"},on:{change:function(e){t.tableKey=t.tableKey+1}},model:{value:t.isShow.downNum,callback:function(e){t.$set(t.isShow,"downNum",e)},expression:"isShow.downNum"}},[t._v("反对数")]),t._v(" "),i("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px","margin-bottom":"15px"},on:{change:function(e){t.tableKey=t.tableKey+1}},model:{value:t.isShow.starNum,callback:function(e){t.$set(t.isShow,"starNum",e)},expression:"isShow.starNum"}},[t._v("点赞数")]),t._v(" "),i("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px","margin-bottom":"15px"},on:{change:function(e){t.tableKey=t.tableKey+1}},model:{value:t.isShow.updateTime,callback:function(e){t.$set(t.isShow,"updateTime",e)},expression:"isShow.updateTime"}},[t._v("更新时间")]),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreateNews}},[t._v("创建资讯")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:t.tableKey,attrs:{data:t.importantNewsLists,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index+1)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.title)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"作者"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.author)+"\n      ")]}}])}),t._v(" "),t.isShow.commentNum?i("el-table-column",{attrs:{align:"center",label:"评论数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.commentNum)+"\n      ")]}}])}):t._e(),t._v(" "),t.isShow.starNum?i("el-table-column",{attrs:{align:"center",label:"点赞数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.starNum)+"\n      ")]}}])}):t._e(),t._v(" "),t.isShow.downNum?i("el-table-column",{attrs:{align:"center",label:"反对数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.downNum)+"\n      ")]}}])}):t._e(),t._v(" "),t.isShow.shareNum?i("el-table-column",{attrs:{align:"center",label:"分享数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.shareNum)+"\n      ")]}}])}):t._e(),t._v(" "),t.isShow.status?i("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.status)+"\n      ")]}}])}):t._e(),t._v(" "),t.isShow.updateTime?i("el-table-column",{attrs:{align:"center",prop:"created_at",label:"更新时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"el-icon-time"}),t._v(" "),i("span",[t._v(t._s(new Date(1e3*parseInt(e.row.updateTime)).toLocaleString()))])]}}])}):t._e(),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作","class-name":"small-padding fixed-width",width:"330"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(i){t.showFlashDetail(e.row)}}},[t._v("查看")]),t._v(" "),i("el-button",{attrs:{type:"warning",size:"mini",plain:""},on:{click:function(i){t.handleUpdateImportantNews(e.row)}}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(i){t.handleDelete(e.row)}}},[t._v("删除")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"info",plain:""},on:{click:function(i){t.handlePostNews(e.row)}}},[t._v("跟帖管理")])]}}])})],1),t._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:"详情",visible:t.detailDialogVisible,width:"80%"},on:{"update:visible":function(e){t.detailDialogVisible=e}}},[i("div",{staticClass:"detail-item"},[i("img",{staticClass:"image",attrs:{src:t.temp.cover}})]),t._v(" "),i("div",{staticClass:"detail-item"},[i("span",{staticClass:"detail-item-title"},[t._v("标题: ")]),i("span",[t._v(t._s(t.temp.title))])]),t._v(" "),i("div",{staticClass:"detail-item"},[i("span",{staticClass:"detail-item-title"},[t._v("作者: ")]),i("span",[t._v(t._s(t.temp.author))])]),t._v(" "),i("div",{staticClass:"detail-item"},[i("span",{staticClass:"detail-item-title"},[t._v("点赞数: ")]),i("span",[t._v(t._s(t.temp.starNum))])]),t._v(" "),i("div",{staticClass:"detail-item"},[i("span",{staticClass:"detail-item-title"},[t._v("反对数: ")]),i("span",[t._v(t._s(t.temp.downNum))])]),t._v(" "),i("div",{staticClass:"detail-item"},[i("span",{staticClass:"detail-item-title"},[t._v("评论数: ")]),i("span",[t._v(t._s(t.temp.commentNum))])]),t._v(" "),i("div",{staticClass:"detail-item"},[i("span",{staticClass:"detail-item-title"},[t._v("分享数: ")]),i("span",[t._v(t._s(t.temp.shareNum))])]),t._v(" "),i("div",{staticClass:"detail-item",staticStyle:{"margin-bottom":"20px"}},[i("span",{staticClass:"detail-item-title"},[t._v("更新时间: ")]),i("span",[t._v(t._s(new Date(1e3*parseInt(t.temp.updateTime)).toLocaleString()))])]),t._v(" "),i("hr"),t._v(" "),i("div",{staticClass:"detail-item"},[i("span",{domProps:{innerHTML:t._s(t.temp.content)}})]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.detailDialogVisible=!1}}},[t._v("关闭")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"提示",visible:t.deleteDialogVisible,width:"50%"},on:{"update:visible":function(e){t.deleteDialogVisible=e}}},[i("span",[t._v("确定删除: ")]),i("span",{staticStyle:{color:"#409EFF"}},[t._v(t._s(t.deleteTemp.title))]),i("span",[t._v(" ?")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.deleteDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleDeleteCommit(t.deleteTemp.newsId)}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var r=i("/Xao")(o,l,!1,function(t){i("/Uoo")},null,null);e.default=r.exports}});