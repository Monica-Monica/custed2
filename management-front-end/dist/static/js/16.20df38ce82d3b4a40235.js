webpackJsonp([16],{"2+A9":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("aA9S"),l=a.n(i),s=a("P9l9"),n=[{lable:"用户ID",value:"userId"},{lable:"用户名",value:"nickname"},{lable:"电话",value:"mobile"}],r={name:"user-management",data:function(){return{tableKey:0,isShow:{certNo:!1,certName:!1,certType:!1,updateTime:!1},list:null,total:0,listQuery:{page:1,limit:10,title:"",type:void 0,queryType:"",sort:"+id"},queryTypeOptions:n,listLoading:!0,dialogFormVisible:!1,dialogStatus:"",textMap:{update:"Edit",create:"Create"},rules:{status:[{required:!0,message:"状态不能为空",trigger:"change"}],updateTime:[{type:"date",required:!0,message:"时间必须填写",trigger:"change"}],nickname:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"}]},temp:{id:void 0,updateTime:Date.parse(new Date),nickname:"",status:"published",phone:"",newPassWord:""},statusOptions:["success","defeated"]}},filters:{certStatusFilter:function(e){return{0:"danger",1:"success"}[e]},certStatusTextFilter:function(e){return{0:"未认证",1:"已认证"}[e]},certTypeFilter:function(e){return{0:"未定义",1:"身份证",2:"护照"}[e]}},methods:{updateData:function(){this.updateUserPassWordRequest(this.temp.newPassWord,this.temp.userId),this.dialogFormVisible=!1},createData:function(){this.dialogFormVisible=!1,this.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})},handleUpdate:function(e){var t=this;this.temp=l()({},e),this.temp.updateTime=new Date(this.temp.updateTime),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},handleDelete:function(){},handleSizeChange:function(e){this.listQuery.limit=e,this.getUser(this.listQuery.page,this.listQuery.limit)},handleCurrentChange:function(e){this.listQuery.page=e,this.getUser(this.listQuery.page,this.listQuery.limit)},handleFilter:function(){this.listQuery.page=1,""===this.listQuery.queryType||""===this.listQuery.title?(this.listQuery.title=void 0,this.getUser(1,10)):this.searchUserRequest(this.listQuery.queryType,this.listQuery.title)},getUser:function(e,t){var a=this;Object(s.r)(e,t).then(function(e){console.log(e.data),a.list=e.data.data.list,a.total=e.data.data.total}).catch(function(e){console.log(e)})},searchUserRequest:function(e,t){var a=this;Object(s.A)(e,t).then(function(e){console.log(e.data),a.list=e.data.data.list,a.total=e.data.data.total}).catch(function(e){console.log(e)})},updateUserPassWordRequest:function(e,t){var a=this;Object(s.G)(e,t).then(function(e){console.log(e),0===e.data.code?a.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}):a.$message.error(e.data.msg)}).catch(function(e){console.log(e.response)})}},created:function(){this.listLoading=!0,this.getUser(1,10),this.listLoading=!1}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container user-management-container"},[a("div",{staticClass:"filter-container"},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"查询类别"},model:{value:e.listQuery.queryType,callback:function(t){e.$set(e.listQuery,"queryType",t)},expression:"listQuery.queryType"}},e._l(e.queryTypeOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.lable,value:e.value}})})),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"关键字"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}}),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),a("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px"},on:{change:function(t){e.tableKey=e.tableKey+1}},model:{value:e.isShow.certNo,callback:function(t){e.$set(e.isShow,"certNo",t)},expression:"isShow.certNo"}},[e._v("证件号码")]),e._v(" "),a("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px"},on:{change:function(t){e.tableKey=e.tableKey+1}},model:{value:e.isShow.certName,callback:function(t){e.$set(e.isShow,"certName",t)},expression:"isShow.certName"}},[e._v("证件姓名")]),e._v(" "),a("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px"},on:{change:function(t){e.tableKey=e.tableKey+1}},model:{value:e.isShow.certType,callback:function(t){e.$set(e.isShow,"certType",t)},expression:"isShow.certType"}},[e._v("证件类型")]),e._v(" "),a("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px","margin-bottom":"15px"},on:{change:function(t){e.tableKey=e.tableKey+1}},model:{value:e.isShow.updateTime,callback:function(t){e.$set(e.isShow,"updateTime",t)},expression:"isShow.updateTime"}},[e._v("更新时间")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.tableKey,attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.userId)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用户昵称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.nickname)+"\n      ")]}}])}),e._v(" "),e.isShow.certType?a("el-table-column",{attrs:{label:"证件类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("certTypeFilter")(t.row.certType))+"\n      ")]}}])}):e._e(),e._v(" "),e.isShow.certNo?a("el-table-column",{attrs:{label:"证件号码",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.certNo)+"\n      ")]}}])}):e._e(),e._v(" "),e.isShow.certName?a("el-table-column",{attrs:{label:"证件姓名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.certName)+"\n      ")]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"手机号",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mobile))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"class-name":"status-col",label:"认证状态",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e._f("certStatusFilter")(t.row.certStatus)}},[e._v(e._s(e._f("certStatusTextFilter")(t.row.certStatus)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"拒绝原因",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.reason)+"\n      ")]}}])}),e._v(" "),e.isShow.updateTime?a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"更新时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v(e._s(new Date(1e3*parseInt(t.row.updateTime)).toLocaleString()))])]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.handleUpdate(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"修改密码",prop:"new-pass"}},[a("el-input",{model:{value:e.temp.newPassWord,callback:function(t){e.$set(e.temp,"newPassWord",t)},expression:"temp.newPassWord"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:e.createData}},[e._v("确认")]):a("el-button",{attrs:{type:"primary"},on:{click:e.updateData}},[e._v("确认")])],1)],1)],1)},staticRenderFns:[]};var c=a("/Xao")(r,o,!1,function(e){a("lM22")},null,null);t.default=c.exports},iQvq:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"",""])},lM22:function(e,t,a){var i=a("iQvq");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("8fc6bdca",i,!0)}});